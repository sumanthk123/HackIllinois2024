#!/usr/bin/env coffee

logger = require 'torch'
law = require 'law'

baseServices = law.load 'services/base'
baseServices = law.create {services: base}

coreServices = law.load 'services/core'
coreServices = law.create
  services: coreServices
  resolvers:
    lib: (name) -> require name
    axiom: (name) ->
      switch name
        when 'baseServices'
          baseServices

logger.red process.argv
[moduleName, serviceName] = process.argv.slice 2

coreServices.main {moduleName, serviceName}, (err, results) ->
  if err
    console.err err.red

  else
    console.log 'SUCCESS'
    console.log results.cyan
